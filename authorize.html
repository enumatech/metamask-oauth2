<html>
<head>
</head>
<body>
    <button id="authorize" value="Login"/>
    <script type="text/javascript" src="query.js"></script>
    <script type="text/javascript">
(function(){

    var obj = parseQuery(window.location.search);

    function error(err) {
        window.location = (obj.redirect_uri || "") + "#error=" + err
    }

    if (window.location.protocol !== "https") {
        return error("unsupported_over_http");
    }
    if (obj.response_type !== "token") {
        return error("unsupported_response_type");
    }
    if (!obj.client_id || !obj.redirect_uri) {
        return error("parameter_absent");
    }
    if (obj.client_id !== "self") {
        return error("unauthorized_client");
    }
    if (obj.redirect_uri.indexOf(window.location.host) < 0) {
        return error("invalid_callback");
    }
    if (obj.scope) {
        return error("invalid_scope");
    }

    window.location = obj.redirect_uri + "#" + makeQuery({
        access_token: "Jwt.T0.k3n",
        token_type: "bearer",
        //expires_in: "recommended",
        //scope: obj.scope,
        state: obj.state,
    });

})();
    </script>
</body>
</html>
